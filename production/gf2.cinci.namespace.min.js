/*!FOUNDATION cinci.namespace.js */ !function(e){e.fn.rssfeed=function(a,n,i){var n=e.extend({ssl:!1,limit:10,showerror:!0,errormsg:"",date:!0,dateformat:"default",titletag:"h4",content:!0,snippet:!0,snippetlimit:120,linktarget:"_self"},n);return this.each(function(o,s){var l="";if(n.ssl&&(l="s"),e(s).hasClass("rssFeed")||e(s).addClass("rssFeed"),null===a)return!1;var r="http"+l+"://query.yahooapis.com/v1/public/yql?q="+encodeURIComponent('select * from feed where url="'+a+'"');null!==n.limit&&(r+=" limit "+n.limit),r+="&format=json",e.getJSON(r,function(a,o,l){if("success"===o)t(s,a,n),e.isFunction(i)&&i.call(this,e(s));else if("error"===o||"parsererror"===o){var r;if(!n.showerror)return!1;r=""!==n.errormsg?n.errormsg:l,e(s).html('<div class="rssError"><p>'+r+"</p></div>")}})})};var t=function(t,a,n){var i,o=a.query.results.item;if(!o)return!1;var s="";e.each(o,function(e){var t,a=o[e];if(a.title.replace(/[^\w\s]/gi,""),a.categories.toString().replace(/ &amp; /g," ").replace(/ /g,"-").replace(/,/g," "),a.pubDate){var i=new Date(a.pubDate);"default"===n.dateformat?t=(i.getMonth()+1).toString()+"/"+i.getDate().toString()+"/"+i.getFullYear():"spellmonth"===n.dateformat?t=["January","February","March","April","May","June","July","August","September","October","November","December",][i.getMonth()]+" "+i.getDate().toString()+", "+i.getFullYear():"localedate"===n.dateformat?t=i.toLocaleDateString():"localedatetime"===n.dateformat&&(t=i.toLocaleDateString()+" "+i.toLocaleTimeString())}s+='<div class="storyTileOuterWrapper"><div class="storyTileInnerWrapper" data-tag="'+tags+'">',s+='<div class="storyTileTextWrapper"><div class="storyTileTitle"><'+n.titletag+'><a href="'+a.link+'" title="View this feed at '+o.title+'">'+a.title+"</a></"+n.titletag+">",n.date&&t&&(s+='<div class="storyTileDate">'+t+"</div>"),n.content&&(s+='<div class="storyTileDescription">'+a.description+"</div>"),s+="</div>"}),(i=e(s)).find(".storyTileInnerWrapper").each(function(){e(this).prepend('<div class="storyTileImage">'),e(this).find(".storyTileImage").prepend(e(this).find("img").first())}),e(t).append(i),e("a",t).attr("target",n.linktarget)}}(jQuery);var bbpage=Sys.WebForms.PageRequestManager.getInstance(),BBI=BBI||{Config:{version:1,updated:"12/22/2015 4:30 PM",isEditView:!!window.location.href.match("pagedesign"),slideshowRan:!1},Defaults:{rootpath:function(){var e=BLACKBAUD.api.pageInformation.rootPath;return e.substring(0,e.lastIndexOf("alumni"))}(),pageId:BLACKBAUD.api.pageInformation.pageId,highlightedFundsQueryId:"https://www.alumni.uc.edu/"===BLACKBAUD.api.pageInformation.rootPath?"bcafe634-adaa-4b72-b79d-ed16fc18bc8f":"c22e7fbb-abcb-4aed-acb2-b18f8639f77e",highlightedUcgniFundsQueryId:"https://www.alumni.uc.edu/"===BLACKBAUD.api.pageInformation.rootPath?"bcafe634-adaa-4b72-b79d-ed16fc18bc8f":"dcb9afbd-8cc0-4dc5-990f-24716779c18d",cascadingFundsQueryId:"https://www.alumni.uc.edu/"===BLACKBAUD.api.pageInformation.rootPath?"d54d11f0-3f9c-4d63-91a8-fecf1f06944c":"dcb9afbd-8cc0-4dc5-990f-24716779c18d",advancedDonationFormFundsQueryId:"https://www.alumni.uc.edu/"===BLACKBAUD.api.pageInformation.rootPath?"d54d11f0-3f9c-4d63-91a8-fecf1f06944c":"b0e28c08-4081-4328-91f5-8509243f5d79",guidQueryID:"https://www.alumni.uc.edu/"===BLACKBAUD.api.pageInformation.rootPath?"d54d11f0-3f9c-4d63-91a8-fecf1f06944c":"612a82e8-24c8-4ae1-9aee-d5a006750507",greatestNeedFund:"https://www.alumni.uc.edu/"===BLACKBAUD.api.pageInformation.rootPath?"898c3603-1440-4b38-9145-19d79effeb2c":"7318410e-17bd-4d1f-8437-d5742754a93a",pledgeFund:"https://www.alumni.uc.edu/"===BLACKBAUD.api.pageInformation.rootPath?"c21f1095-b071-4107-8942-0f1af860ea97":"6f0e4d60-1df1-495a-9e01-82b3e9d91aff",generalFreeFormFund:"https://www.alumni.uc.edu/"===BLACKBAUD.api.pageInformation.rootPath?"c21f1095-b071-4107-8942-0f1af860ea97":"6f0e4d60-1df1-495a-9e01-82b3e9d91aff",newsFeedUrl:"https://foundation.uc.edu/feed.rss?id=1",customADFAttributes:{"Tribute Gift Type":"7b877e86-532a-4851-a1b1-7cd777fd08ec","Honoree Name":"6337f9a2-c611-47f9-a81c-bcb01f457467","Acknowledgee Title":"446bf4a6-e365-468d-bad0-37ce30b0e188","Acknowledgee First Name":"91ca3e25-5831-40fe-9b7a-957f9608b8dd","Acknowledgee Last Name":"3a7e79d5-f5f7-4fd8-8031-77f56b08b255","Acknowledgee Address":"16a044a1-2171-4d1d-8029-48d4cba9f5dc","Acknowledgee City":"f2a00e58-4d26-4c5f-a3c2-9403eb50bd18","Acknowledgee State":"44b0f3c0-c4d6-4343-8355-943fb4703990","Acknowledgee Zip":"f20b1f0b-14a1-40fe-94a6-1c6362db1d17","Acknowledgee Country":"cca52f5c-97eb-4a5d-b3ac-4d7ed9b036a4","Acknowledgee Phone":"030061fe-6a62-4e4d-8129-bc0b60f1ea00","Acknowledgee Email":"93973031-17fc-49d2-a676-70544930a874","UC Graduation Year":"b603114f-2669-400e-a870-186f9b923e08","UC Graduation Degree":"64f2b303-e27a-419c-820f-676674b3004e","Joint Spouse Name":"3a49afdd-9180-40a7-9c31-03ed83736388","Matching Gift Company":"cce2f315-6ba7-4713-891b-5b2c4b422cc6","Pledge ID":"01d9e45d-533f-4759-ba10-07fd687a202c"},wantOrnament:"d4924bdf-f68c-4622-ac70-c9cbbaff1733",monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",],titleTable:"456ffd4c-0fbf-49db-a503-0726f86e2a39",comments:"E3FE7CF0-7FFD-447A-979D-E73467EF94D6"},Methods:{pageInit:function(){BBI.Methods.menuToggles(),BBI.Methods.pageFunctions(),0!==$(".BBDonationApiContainer").length&&(BBI.Methods.initADF(),BBI.Methods.fundSearch(),BBI.Methods.validationMarkers()),BBI.Config.isEditView?($("#mockup").addClass("edit-mode"),BBI.Methods.adminStyleFixes()):(BBI.Methods.scrollToTop(),BBI.Methods.createMenuSVG(),BBI.Methods.designationSearchFormat(),BBI.Methods.designationSearchBoxes(),BBI.Methods.donationAmount(),BBI.Methods.coerStyles(),BBI.Methods.initMobileHeader(),BBI.Methods.mobileSubMenu(),BBI.Methods.datePicker(),BBI.Methods.urlParameterCheck(),BBI.Methods.customSingleDonationForm.tbodyClasses(),BBI.Methods.customSingleDonationForm.stepOneGivingDetails.fundDesignationOption(),BBI.Methods.customSingleDonationForm.stepOneGivingDetails.clickHiddenAmount(),BBI.Methods.customSingleDonationForm.stepOneGivingDetails.donationAmount(),BBI.Methods.customSingleDonationForm.stepTwoDonorInfo.billingTitleList(),BBI.Methods.customSingleDonationForm.stepTwoDonorInfo.billingName(),BBI.Methods.customSingleDonationForm.stepTwoDonorInfo.billingAddress(),BBI.Methods.customSingleDonationForm.stepTwoDonorInfo.billingCity(),BBI.Methods.customSingleDonationForm.stepTwoDonorInfo.billingCountryList(),BBI.Methods.customSingleDonationForm.stepTwoDonorInfo.billingStateList(),BBI.Methods.customSingleDonationForm.stepTwoDonorInfo.billingZip(),BBI.Methods.customSingleDonationForm.stepTwoDonorInfo.billingPhone(),BBI.Methods.customSingleDonationForm.stepTwoDonorInfo.billingEmail(),BBI.Methods.customSingleDonationForm.stepThreePaymentInfo.autoFillExtraction(),BBI.Methods.customSingleDonationForm.stepThreePaymentInfo.hiddenDataPersistence(),BBI.Methods.customSingleDonationForm.stepThreePaymentInfo.cardholder(),BBI.Methods.customSingleDonationForm.stepThreePaymentInfo.cardNumber(),BBI.Methods.customSingleDonationForm.stepThreePaymentInfo.cardExp(),BBI.Methods.customSingleDonationForm.stepThreePaymentInfo.cardCSC(),BBI.Methods.customSingleDonationForm.stepThreePaymentInfo.submitButton(),BBI.Methods.customSingleDonationForm.stepToggles(),BBI.Methods.customSingleDonationForm.hiddenFormValidation(),$("iframe[id*= twitter]").css("display","inline-block")),Sys.WebForms.PageRequestManager.getInstance().add_pageLoaded(function(){BBI.Methods.pageRefresh(),BBI.Methods.customSingleDonationForm.stepTwoDonorInfo.billingCountryList(),BBI.Methods.customSingleDonationForm.stepTwoDonorInfo.billingStateList()}),$(document).ready(function(){BBI.Methods.pageLoad()})},pageRefresh:function(){BBI.Methods.coerStyles(),BBI.Methods.customSingleDonationForm.stepTwoDonorInfo.billingCountryList(),BBI.Methods.customSingleDonationForm.stepTwoDonorInfo.billingStateList(),$(".mobileCanvas.show-for-small:visible").length&&$("tbody[id$=tbdForgotPWDUserName]").length&&($(".leftCanvas").toggleClass("expanded",1e3,"easeInOutQuart"),$(".rightCanvas").toggleClass("retracted",1e3,"easeInOutQuart")),$(".mobileCanvas.show-for-small:visible").length&&$("input[id$=btnLogout]").length&&$(".mobileCanvas .offcanvasReg").hide()},pageLoad:function(){if(BBI.Config.isEditView||this.foundationMediaOverlay(),$('#ucBand input[id*="_txtQuickSearch"]').attr("placeholder","Search UC"),$(".mobileCanvas .QuickSearchTextbox").prop("placeholder","Search UC Foundation"),$(".PaymentPart_FormContainer").length>0&&($(".PaymentPart_CartCell.PaymentPart_CartDescriptionCell > a").contents().unwrap().wrap("<span></span>"),0===$('.wrapButtons a:contains("Make Another Gift")').length)){var e=$(".PaymentPart_CartCell.PaymentPart_CartDescriptionCell").find('span:contains("Other")');0!==e.length&&$(e).text("Pledge Payment")}},scrollToTop:function(){var e=$("#scrollTop"),t=!1,a=!1;function n(){1e4>$(window).width()&&$(window).width()>0&&t&&!a?e.fadeIn():e.fadeOut()}$(window).resize(function(){$(window).width()>=1e4&&!a?(a=!0,n()):1e4>$(window).width()&&a&&(a=!1,n())}),$(window).scroll(function(){$(window).scrollTop()>=100&&!t?(t=!0,n()):100>$(window).scrollTop()&&t&&(t=!1,n())}),e.on("click",function(){var e=!1,t=$(this);t.addClass("active"),$("html, body").animate({scrollTop:"0"},{duration:800,complete:function(){e||(e=!0,t.removeClass("active"))}})})},createMenuSVG:function(){$(".alumni #mainMenu .mainMenu .nccUlMenuSub2").each(function(){var e=$(this).height(),t=Math.floor(e/10);$(this).append('<svg viewbox="0 0 '+t+" "+e+'" height="'+e+'" width="'+t+'" style="position:absolute; top: 0; right: -'+(t-1)+'px" ><polygon points="0,0 0,'+e+" "+t+',0" style="fill:#de1c24;" /></svg>')})},coerStyles:function(){0!==$("#status-table").length&&($("#status-table").addClass("clearfix"),$('span[id*="rptAttendeesDetails"]').not('[style], [id*="udpAttendees"]').parent("td, div.cell").addClass("labelTd"),$('[id*="udpAttendees"]').parent("td, div.cell").addClass("mainTd"),$(".mainTd").length>1&&($(".mainTd").css("width","50%"),$(".mainTd").last().css("border-left","1px solid #CCC").css("padding-left","10px"),$("#divWizardButtons").css("max-width","100%")))},donationAmount:function(){var e=BLACKBAUD.api.querystring.getQueryStringValue("amount");if(0!==e.length&&0!==$('.DonationFormTable input[id$="txtAmount"]').length)$('.DonationFormTable input[id$="txtAmount"]').val(e);else if(0!==e.length&&0!==$('#advancedDonationForm input[id$="txtAmount"]').length){$('.DonationFormTable input[id$="txtAmount"]').val(e),$(".amountButton .selected").removeClass("selected"),$("#adfOtherLabel").hide(),$("#txtAmount").show().val(e);var t=$("#recurringTotal span").text();$(".adfTotalAmount span").html(t)}},foundationMediaOverlay:function(){if(0!==$("#internalPage .mediaBoxOverlay").length){var e=$(".mediaBoxOverlay").closest(".container");$(window).width(),e.append('<i class="mediaBoxToggle">'),$(".mediaBoxToggle").on("click",function(){$(".mediaBoxOverlay").toggle({effect:"scale",direction:"both",origin:["bottom","right"]}),$(this).toggleClass("expanded")})}else if(0!==$("#internalPage.alumni .wrapBreadcrumbs p img").length){var t=$(".wrapBreadcrumbs p img"),a=t.attr("src");$(".fullWidthBackgroundImage").css({"background-image":"url("+a+")","background-position":"center top"}),t.closest("p").hide()}else if(0!==$("#homePage .mediaBoxOverlay").length){var t=$(".wrapBreadcrumbs p img"),a=t.attr("src");$(".fullWidthBackgroundImage").css({"background-image":"url("+a+")","background-position":"center top"}),t.closest("p").hide()}0!==$(".utilityMenus .offcanvasReg").length&&(0!==$('.utilityMenus a[id*="lbtnRegisterUser"]').length&&$('.utilityMenus a[id*="lbtnRegisterUser"]').after($(".utilityMenus .offcanvasReg")),$('.utilityMenus table[id*="tbl"]').wrap('<div class="animatedReveal">'),$(".utilityMenus li.login a").on("click",function(){$(this).hasClass("active")?($(this).removeClass("active"),$('.utilityMenus table[id*="tbl"]').hide("blind","slow")):($(this).addClass("active"),$('.utilityMenus table[id*="tbl"]').show("blind","slow"))}))},menuToggles:function(){$(".leftCanvas .menuToggle").on("click",function(e){e.preventDefault(),$("#BodyId").toggleClass("menu-open"),$(".leftCanvas").toggleClass("expanded"),$(".rightCanvas").toggleClass("retracted"),setTimeout(function(){$("#mobileLogo").toggleClass("expanded")},$("#mobileLogo").hasClass("expanded")?600:0)}),$(".rightCanvas .menuToggle").on("click",function(e){e.preventDefault(),$("#BodyId").toggleClass("menu-open"),$(".fa").toggleClass("fa-bars fa-close"),$(this).toggleClass("open"),$(".rightCanvas").toggleClass("expanded"),$(".leftCanvas").toggleClass("retracted"),setTimeout(function(){$("#mobileLogo").toggleClass("expanded")},$("#mobileLogo").hasClass("expanded")?600:0)})},pageFunctions:function(){$("input.SearchTextBox").attr("placeholder","Search");var e,t=$("#search");$(".search > a").on("click",function(e){e.preventDefault(),t.toggleClass("isOpen").slideToggle();var a=t.hasClass("isOpen");t.animate({marginTop:a?"":"-55px"},300)});var a=$('<svg class="searchIcon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 43.14 49.94"><g><path class="cls-1" d="M24.46,0A21.88,21.88,0,0,1,37.87,4.66c3.72,3,5.76,6.73,5.17,11.66a24.31,24.31,0,0,0,0,4.18c.24,4.74-1.9,8.31-5.54,11.05-5,3.75-10.68,4.84-16.77,4.3a15.07,15.07,0,0,1-3.41-.62c-1.12-.37-1.59,0-2.13,1-2.21,3.87-4.5,7.7-6.79,11.53a4.37,4.37,0,0,1-4.69,2.15A4.46,4.46,0,0,1,.09,46.3a4.78,4.78,0,0,1,.73-3.54C3.06,39,5.26,35.21,7.53,31.46a1.15,1.15,0,0,0-.19-1.71,11.19,11.19,0,0,1-3.55-7.86A68.13,68.13,0,0,1,4,13.08c.5-4.4,3.26-7.41,6.89-9.68C14.74,1,19,0,24.46,0Zm-2,25.8c6.28,0,11-1.67,14.18-4.63,4-3.74,4.14-9,.26-12.87A17.26,17.26,0,0,0,26.27,3.56C21,3,16,3.81,11.59,7c-5.7,4.13-5.82,10.62-.29,15A18.58,18.58,0,0,0,22.45,25.8Zm-4.53,6.05a.58.58,0,0,0,.22.12c6.27,1.39,12.17.65,17.45-3.22a9.58,9.58,0,0,0,3.76-5.42C33.09,28.81,25.9,30,18.24,28.74ZM15,29.78c-.29-.32-.61-.92-.89-.9a2,2,0,0,0-1.4.71c-3,4.91-5.88,9.85-8.81,14.78-.41.7-.72,1.45.14,2s1.35-.17,1.76-.85l8.64-14.6C14.65,30.6,14.79,30.27,15,29.78Zm-4-3.78L7.53,23.26l-.29.2,2.37,4.09Z"></path></g></svg>');$("#menu li.search span, button#srch_btn_v").prepend(a),$("header").next().css("margin-top",(e=$("header")).outerHeight()+"px")},designationSearchFormat:function(){if(0!==$("span.designationInfoBoxOuter").length)for(var e=$("span.designationInfoBoxOuter"),t=0;t<e.length;t+=3)e.slice(t,t+3).wrapAll("<div style='clear:both'></div>")},getImagesFromFolder:function(e,t){var a=BLACKBAUD.api.pageInformation.rootPath+"WebApi/Images/"+e;$.getJSON(a,function(e){t(e)})},foundationGridImages:function(e){var t=0;$(".foundationCalendarGridImage:visible img").each(function(){$(this).attr("src",e[t].Url),t++})},designationSearchBoxes:function(){0!=$(".designationInfoBox").length&&$(".designationInfoBox").each(function(){var e=$(this).find("hiddenData a").attr("href");$(this).find("hiddenData").text(),$(this).closest(".BBDesignationSearchResult").addClass("designationInfoBoxOuter"),$(this).find(".designationInfoBoxGiveButton").attr("href",e),$(this).find(".designationInfoBoxInfoButton").attr("href",e)})},initADF:function(){if(0!==$("#donationForm").length){BBI.Methods.fundList(),BBI.Methods.populateCountryDropdowns(),BBI.Methods.queryParameters();let e=$("textarea#comments").attr("maxLength"),t=$("textarea#comments");var a=e;t.keyup(function(){var e=a-$(this).val().length;$(".char-counter span").text(e)});var n=BBI.Methods.returnQueryValueByName("appeal");console.log(n),"570c2edf-c180-4f4f-8b27-4dcfc60c7699"==n?(console.log("true"),$("#ornament").css("display","flex")):console.log("false"),$("#toggleOtherFund").on("click",function(){$(".toggleOtherFund").slideDown(),$("#otherArea").focus()});var i=new Date().getDate();function o(){var e=new Date;return i>15?e.setMonth(e.getMonth()+1,1):1==i||e.setDate(15),e}$("#startDate").datepicker({beforeShowDay:function(e){return[1==e.getDate()||15==e.getDate(),]},minDate:o()}),$("#startDate").datepicker("setDate",o()),$("#adfSubmitButton").on("click",function(e){e.preventDefault(),$(".fund-card.empty").is(":visible")?($("#adfError").html('<span class="fa fa-exclamation-circle"></span><p style="vertical-align: middle;display: inline-block !important;">Please select a fund from above and enter an amount.</p>'),$("#adfError").show()):BBI.Methods.validateADF()?($("#adfError").hide(),$(this).addClass("disabled").unbind("click"),BBI.Methods.getDonationData()):$("#adfError").html('<span class="fa fa-exclamation-circle"></span><p>Some required information is missing. Form submission is disabled until all required information is entered.</p>')}),$("html, body").animate({scrollTop:"0"})}},fundList:function(){$(".BBDonationApiContainer");var e=$("#areaSupportSelect"),t=$("#collegeUnitSelect"),a=$(".collegeUnitToggle"),n=$(".fundToggle"),i=$("#fundSelect"),o=new BLACKBAUD.api.QueryService,s=[];function l(e,t,a){return a.indexOf(e)===t}let r=["The UC Fund","Scholarships","UC Health","Colleges/Units"];o.getResults(BBI.Defaults.advancedDonationFormFundsQueryId,function(t){var a=t.Fields,n=t.Rows,i=[];$.each(a,function(e,t){i[t.Name]=e}),$.each(n,function(){var e=this.Values;e[8]&&s.push({name:e[1],id:e[6],cat:e[8],subcat:e[9]})});var o=0;$.each(r,function(t,a){e.append('<option value="'+a+'" class="des-cat cat-'+t+'">'+a+"</option>"),++o==r.length&&BBI.Methods.hideQueryLoader()});var l=BBI.Methods.returnQueryValueByName("area"),d=BBI.Methods.returnQueryValueByName("unit");l&&("scholarships"==l?(console.log("scholarships"),document.getElementById("areaSupportSelect").value="Scholarships",$("select#areaSupportSelect").trigger("change")):"ucfund"==l?(console.log("ucfund"),document.getElementById("areaSupportSelect").value="The UC Fund",$("select#areaSupportSelect").trigger("change")):"uchealth"==l?(console.log("uchealth"),document.getElementById("areaSupportSelect").value="UC Health",$("select#areaSupportSelect").trigger("change")):"college"==l&&(console.log("college"),document.getElementById("areaSupportSelect").value="Colleges/Units",$("select#areaSupportSelect").trigger("change"),d&&$("select#collegeUnitSelect").find('option[value^="'+d+'"]').prop("selected",!0).trigger("change")))}),BBI.Methods.fundCards(),$(e).on("change",function(){t.prop("selectedIndex",0).find("option").not("option:first").remove(),i.prop("selectedIndex",0).find("option").not("option:first").remove();var e=$(this).val(),o=$.grep(s,function(t){return t.cat===e}),r=o.map(function(e){return e.subcat});function d(e,t){return $(t).text().toUpperCase()<$(e).text().toUpperCase()?1:-1}var u=r.filter(l);if("Colleges/Units"==e){$(a).slideDown(),$(n).slideUp(),$.each(u,function(e,a){var n=a.substring(a.indexOf("-")+1);$(t).append($('<option value="'+a+'">'+n+"</option>"))});var c=document.getElementById("collegeUnitSelect"),p=document.getElementById("fundSelect");c.disabled=!1,p.disabled=!0,c.setAttribute("selectedIndex",0),$(t).focus(),$("#collegeUnitSelect option:not(:first)").sort(d).appendTo("#collegeUnitSelect")}else if("Scholarships"==e||"The UC Fund"==e||"UC Health"==e){$(a).slideUp(),$(n).slideDown(),$.each(o,function(e,t){$(i).append($('<option data-cat="'+t.cat+'" data-subcat="'+t.subcat+'" value="'+t.id+'">'+t.name.split("(")[0].trim()+"</option>"))});var c=document.getElementById("collegeUnitSelect"),p=document.getElementById("fundSelect");c.disabled=!0,p.disabled=!1,c.setAttribute("selectedIndex",0),$(i).focus(),$("#fundSelect option:not(:first)").sort(d).appendTo("#fundSelect")}}),$(t).on("change",function(){$(n).slideDown(),$(i).focus().prop("selectedIndex",0).find("option").not("option:first").remove();var t=$(e).val(),a=$(this).val(),o=$.grep(s,function(e){return e.cat===t&&e.subcat===a});$.each(o,function(e,t){$(i).append($('<option data-cat="'+t.cat+'" data-subcat="'+t.subcat+'" value="'+t.id+'">'+t.name.split("(")[0].trim()+"</option>"))}),document.getElementById("fundSelect").disabled=!1,$("#fundSelect option:not(:first)").sort(function e(t,a){return $(a).text().toUpperCase()<$(t).text().toUpperCase()?1:-1}).appendTo(i)})},fundSearch:function(){var e=$("#desSearch"),t=new BLACKBAUD.api.QueryService,a=[];t.getResults(BBI.Defaults.advancedDonationFormFundsQueryId,function(t){a=[];var n=t.Fields,i=t.Rows,o=[];$.each(n,function(e,t){o[t.Name]=e}),$.each(i,function(){var e=this.Values;a.push({value:e[6],label:e[0],cat:e[8],subcat:e[9]})});var s=new Bloodhound({datumTokenizer:Bloodhound.tokenizers.obj.whitespace("label"),queryTokenizer:Bloodhound.tokenizers.whitespace,local:a,sorter:function(e,t){var a=$("#desSearch").val();return a==e.value?-1:a==t.value?1:a.toLowerCase()==e.value.toLowerCase()?-1:a.toLowerCase()==t.value.toLowerCase()?1:a!=e.value&&a!=t.value?e.value<t.value?-1:e.value>t.value?1:0:void 0}});function l(){e.typeahead("val","").typeahead("close"),e.removeData()}s.initialize().done(function(){e.typeahead({highlight:!0,minLength:2},{display:"label",name:"search",source:s,limit:"Infinity",templates:{empty:function(){return'<div class="no-match">No Results Found. <ol style="list-style:decimal;padding-left:1em;"><li>Please enter the fund name in the Comments section below.</li><li>Clear this box and search for the following fund: <strong>Other/Undesignated UCF (8U99999) fund</strong>.</li></ol></div>'},suggestion:function(e){var t="";return e.cat&&(t=e.cat+" / "),'<div><p class="tt-hierarchy">'+t+e.subcat.substring(e.subcat.indexOf("-")+1).trim()+'</p><p class="tt-label">'+e.label+"</div>"}}}).on("typeahead:select",function(e,t){$(this).data({value:t.value,label:t.label,cat:t.cat,subcat:t.subcat,id:t.value+"-"+t.label.replace(/(_|\W)/g,"").toLowerCase()}),BBI.Methods.addFund($(this)),l()}).on("typeahead:change",function(){""===$.trim($(this).typeahead("val"))&&l()})}).fail(function(){console.log("unable to parse designation query")});var r=BBI.Methods.returnQueryValueByName("fund");if(r){var d=a.filter(function(e){return e.value===r})[0].label;e.data("value",r).typeahead("val",d)}})},fundCards:function(){$("#giftSummary").on("blur",".fund-card input",function(){if(isNaN($(this).val()))$(this).val("0.00");else if(1>Number($(this).val()))$(this).val("0.00"),0===$(this).next(".min-amount").length&&$(this).parent().append('<p class="min-amount">Please enter a minimum of $1.</p>');else{0!==$(this).next(".min-amount").length&&$(this).next(".min-amount").remove();var e=parseFloat($(this).val(),10).toFixed(2);$(this).val(e),BBI.Methods.updateTotal()}}),$("#giftSummary").on("change keyup focusout input paste",".fund-card input",function(e){isNaN($(this).val())||BBI.Methods.updateTotal()}),$("#giftSummary").on("click",".remove-fund",function(e){e.preventDefault();var t=$(this).closest(".fund-card").data("id"),a=$(this).closest(".fund-card").find(".fund-name").text(),n=$("#comments").val().replace("Other Fund: "+a,"");$("#comments").val(n),$(".des-select").find("#"+t).prop("checked",!1),BBI.Methods.removeFund(t)}),$(".fundSelect").on("click",".add-other",function(e){e.preventDefault(),""!=$("#otherArea").val()?BBI.Methods.addFund($(this)):alert("No fund name has been typed.")})},addFund:function(e){var t,a,n,i,o;$(".fund-card.empty").is(":visible")&&$(".fund-card.empty").addClass("hidden"),e.is("#desSearch")?(t=e.data("value"),a=e.data("label"),n=e.data("cat"),i=e.data("subcat"),o=e.data("id"),$(".des-select").find("#"+o).prop("checked",!0)):e.is("#fundSelect")?(t=$("#fundSelect option:selected").val(),a=$("#fundSelect option:selected").text(),n=$("#fundSelect option:selected").data("cat"),i=$("#fundSelect option:selected").data("subcat"),o=$("#fundSelect option:selected").val()):e.is(".add-other")&&(t=$("#otherArea").data("guid"),a=$("#otherArea").val(),n="Other Fund",i=$("#otherArea").val(),o=$("#otherArea").data("guid"),$("#comments").val("Other Fund: "+a)),$("#otherArea").val(""),$('<div class="fund-card" data-id="'+o+'"><div class="fund-card-header"><p><span class="fund-cat">'+n+'</span> / <span class="fund-subcat">'+i.substring(i.indexOf("-")+1).trim()+'</span></p></div><div class="fund-card-block"><div class="row"><div class="g-5 t-g-2 relative remove-bottom"><p class="fund-name">'+a+'</p><p class="fund-guid hidden">'+t+'</p></div><div class="g-3 t-g-2 relative remove-bottom"><p class="symbol">$</p><input class="adfInput form-control required" type="text" placeholder="0.00" required></div></div></div><div class="fund-card-footer"><a href="#" class="button remove-fund"><span class="fa fa-times"></span>&nbsp;&nbsp;Remove Gift</a></div></div>').insertBefore(".proc-fee"),BBI.Methods.updateTotal()},removeFund:function(e){e&&$('.fund-card[data-id="'+e+'"]').remove(),0===$(".fund-card").not(".empty, .proc-fee").length&&$(".fund-card.empty").removeClass("hidden"),BBI.Methods.updateTotal(),$("#pledgeGift").is(":checked")&&BBI.Methods.pledgeSummary()},updateTotal:function(){var e,t=$(".total-amount span"),a=0,n=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});$(".fund-card input").each(function(){var e=Number($(this).val());a+=+parseFloat(e,10).toFixed(2)}).promise().done(function(){e=parseFloat(a,10).toFixed(2),t.text(n.format(e)),e>="20.00"?(console.log("Over $20.00. "+e),$("#wantOrnament").prop("disabled","")):(console.log("Under $20.00"),$("#wantOrnament").prop("disabled","disabled").prop("checked",""))})},hideQueryLoader:function(){$("#queryLoader").slideUp(),$(".fundSelect").slideDown()},populateFundsInSequence:function(e){var t=$("select#collegeUnitsSelect"),a=$("select#collegeUnitsFundSelect");new BLACKBAUD.api.QueryService().getResults(BBI.Defaults.advancedDonationFormFundsQueryId,function(n){var i=n.Fields,o=n.Rows,s=[],l=[],r=[];$.each(i,function(e,t){s[t.Name]=e}),n.Rows.length,$.each(o,function(t){var a=this.Values,n=(a[s.Path],a[s["System record ID"]]),i=a[s["Public name"]],o=a[s["BBIS Fund Category - Multi Attribute\\Value"]],d=a[s["Unit Attribute\\Value"]];if(o==e){var u=a[1].split("\\");u.length>1&&u.shift(),u.push(a[4]),u.push(a[6]),u.push(a[9]),u.push(a[8]),u.push(parseInt(a[7])),l.push(u),"The UC Fund"==e?$("#ucFundSelect").append('<option data-area="'+o+'" value="'+n+'">'+i+"</option>"):"Scholarships"==e?$("#scholarshipsSelect").append('<option data-area="'+o+'" value="'+n+'">'+i+"</option>"):"UC Health"==e?$("#ucHealthSelect").append('<option data-area="'+o+'" value="'+n+'">'+i+"</option>"):"Colleges/Units"==e&&r.push(d)}});var d=r.filter(function e(t,a,n){return n.indexOf(t)===a}).sort();$.each(d,function(e,a){var n=$.trim(a.substring(a.indexOf("-")+1));$(t).append($("<option></option>").val(a).text(n))}),$("select#collegeUnitsSelect option:not(:first)").sort(function e(t,a){return $(a).text().toUpperCase()<$(t).text().toUpperCase()?1:-1}).appendTo("select#collegeUnitsSelect");var u=function e(t){for(var a=[],n={},i=0,o=t.length;i<o;i++){var s=JSON.stringify(t[i]);!n[s]&&(a.push(t[i]),n[s]=!0)}return a}(l);u.sort(function(e,t){return e[5]-t[5]}),$(t).on("change",function(){var e=$(this).val();$(a).find("option").not("option:first").remove(),$.each(u,function(t,n){n[3]===e&&"Colleges/Units"==n[4]&&$(a).append($("<option></option>").val(n[2]).text(n[0]))})})})},initGiftTypeMethod:function(){var e=$(".toggleGiftType input:checked").val();$("#hiddenType").val(e),$(".toggleGiftType input").on("change",function(){var e=$(this).val();if($("#hiddenType").val(e),$(".toggleAmounts .r-pill__item:not(.otherItem) input[type='radio']").parent().addClass("hide"),$(".toggleAmounts .r-pill__item:not(.otherItem) input[type='radio'][id*="+e+"]").each(function(){$(this).parent().removeClass("hide")}),"Pledge"==e?($("fieldset.areaToggle, fieldset.additionalInfoToggle").fadeOut(),$("#amountPledge100").prop("checked",!0),$("#hiddenAmount").val("100")):$("fieldset.areaToggle, fieldset.additionalInfoToggle").fadeIn(),"OneTime"==e&&($("#amountOneTime100").prop("checked",!0),$("#hiddenAmount").val("100")),"Monthly"==e){$("#amountMonthly10").prop("checked",!0),$("#hiddenAmount").val("10");var t=$("#frequency").children("option:selected").val();$("#hiddenStartDate").val($("#startDate").val()),$("#hiddenFrequency").val(t)}else $("#hiddenStartDate").val(""),$("#hiddenFrequency").val("");$("fieldset.toggle").each(function(){$(this).attr("id")===e+"GiftType"?$("#"+e+"GiftType").show():$(this).hide()})})},initAmountMethod:function(){var e,t,a=$(".toggleAmounts input:checked").val();function n(e){var t=$(this).val();$("#hiddenAmount").val(t)}$("#hiddenAmount").val(a),$(".toggleAmounts input[type=radio]").on("change",function(){var e=$(this).val();"other"==e?($(".r-pill__item.otherItem > input.miniInputText, .r-pill__item.otherItem .fa.fa-usd").fadeIn().focus(),$("#hiddenAmount").val("")):($("input.miniInputText").val(""),$(".r-pill__item.otherItem > input.miniInputText, .r-pill__item.otherItem .fa.fa-usd").hide(),$("#hiddenAmount").val(e))}),e=document.getElementById("txtAmount"),t=function(e){return/^-?\d*[.,]?\d{0,2}$/.test(e)},["input","keydown","keyup","mousedown","mouseup","select","contextmenu","drop",].forEach(function(a){e.addEventListener(a,function(){t(this.value)?(this.oldValue=this.value,this.oldSelectionStart=this.selectionStart,this.oldSelectionEnd=this.selectionEnd):this.hasOwnProperty("oldValue")&&(this.value=this.oldValue,this.setSelectionRange(this.oldSelectionStart,this.oldSelectionEnd))})}),document.addEventListener("DOMContentLoaded",function(){document.querySelector(".miniInputText").onkeyup=n},!1)},initAddlInfoMethod:function(){function e(e){var t,a=$(this);5!=a.val().length||(parseFloat(t=a.val())!=parseInt(t)||isNaN(t)?1:0)?a.val().length<5&&$(".zip-error").slideUp(200):$.ajax({url:"https://zip.getziptastic.com/v2/US/"+a.val(),cache:!1,dataType:"json",type:"GET",success:function(e,t){$("#ackCity, #hiddenackCity").val(e.city),$("#ackState, #hiddenackState").val(e.state),$("#ackCountry, #hiddenackCountry").val(e.country),$(".ack-city-state").slideDown(),$("#ackPostalCode").blur(),$("#ackAddressLines").show().focus()},error:function(e,t){$(".zip-error").slideDown(300)}})}document.addEventListener("DOMContentLoaded",function(){document.querySelector("#ackPostalCode").onkeyup=e},!1),$(".checkbox input[type='checkbox']").change(function(){this.id==this.id&&this.checked?$("#"+this.id+"Details").slideDown():this.id==this.id&&($("#"+this.id+"Details").slideUp(),$("#"+this.id+"Details").find("input:text").val(""),$("#"+this.id+"Details").find("input:checkbox").prop("checked",!1),$("#"+this.id+"Details").find("select")[0].selectedIndex=0)}),$(".additionalInfoToggle input").on("keyup change",function(){var e=$(this).val(),t=$(this).attr("id");$("#hidden"+t).val(e)})},initReccurrenceMethod:function(){$("#frequency").on("change",function(){var e=$(this).val();$("#hiddenFrequency").val(e)})},initAreaToSupporteMethod:function(){var e=$(".areaSupportList input:checked").val();$("#hiddenArea").val(e),$("select").prop("selectedIndex",0),$(".areaSupportList input").on("change",function(){var e=$(this).val();$("#hiddenArea").val(e),"Colleges/Units"==e?($("#collegesUnitsDropdown, #collegesUnitsFundsDropdown").prop("selectedIndex",0),$("#collegesUnitsFundsDropdown option:not(:first)").addClass("hide"),$("#collegesUnitsFundsDropdown option:first").text("-- Select College/Unit Fund --"),$(".areaSupportDD").addClass("hide"),$(".collegeUnitsDD").removeClass("hide")):"Advanced Search"==e?($(".areaSupportDD, .collegeUnitsDD").addClass("hide"),$("#advancedFundSearch").removeClass("hide")):($("#designationAreaDropdown").prop("selectedIndex",0),$(".areaSupportDD").removeClass("hide"),$(".collegeUnitsDD").addClass("hide"),$("#designationAreaDropdown option:first").text("-- Select "+e+" to Support --"),$("#designationAreaDropdown option").each(function(){var t=$(this).data("area");e==t?$(this).removeClass("hide"):$(this).addClass("hide")}))}),$(".adfInputWithPlaceholder").on("change keyup",function(){var e=$(this).val();""!=e?($("#hiddenFund").val(e),$("#hiddenGuid").val("6f0e4d60-1df1-495a-9e01-82b3e9d91aff")):($("#hiddenFund").val(""),$("#hiddenGuid").val(""))}),$("#collegesUnitsDropdown").on("change",function(){$("#collegesUnitsFundsDropdown").prop("selectedIndex",0);var e=$(this).val(),t=$.trim(e.substring(e.indexOf("-")+1));$("#collegesUnitsFundsDropdown option:first").text("-- Select "+t+" Fund --"),$("#collegesUnitsFundsDropdown option").each(function(){var t=$(this).data("college");e==t?$(this).removeClass("hide"):$(this).addClass("hide")})}),$(".toggleOtherFund").click(function(e){e.preventDefault(),$("#advanced-search-fund").val(""),$(this).next().slideDown()}),$("#designationAreaDropdown, #collegesUnitsFundsDropdown").on("change",function(){var e=this.options[this.selectedIndex].text,t=this.options[this.selectedIndex].value;$("#hiddenFund").val(e),$("#hiddenGuid").val(t)})},populateGUID:function(){new BLACKBAUD.api.QueryService().getResults(BBI.Defaults.guidQueryID,fundCategory=values[fieldArray["BBIS Fund Category - Multi Attribute\\Value"]],function(e){var t=e.Rows,a=[],n=[],i=[],o=[],s=[],l=[];$.each(t,function(){var e=this.Values,t=e[1].split("\\");t.length>1&&t.shift(),t.push(e[4]),t.push(e[6]),t.push(e[9]),t.push(e[8]),t.push(parseInt(e[7])),a.push(t),"Colleges/Units"==e[8]?n.push(e[9]):"The UC Fund"==e[8]?o.push(t):"Scholarships"==e[8]?s.push(t):"UC Health"==e[8]&&l.push(t);var r=e[1];e[6],i.push(r)});var r=a.sort();console.table(r)})},populateQueryServiceFunds:function(){new BLACKBAUD.api.QueryService().getResults(BBI.Defaults.advancedDonationFormFundsQueryId,function(e){var t=e.Fields,a=e.Rows,n=[],i=[],o=[],s=[];$.each(t,function(e,t){n[t.Name]=e});var l=e.Rows.length,r=0;$.each(a,function(e){var t=this.Values,a=t[n.Path],d=t[n["System record ID"]],u=t[n["Public name"]],c=t[n["BBIS Fund Category - Multi Attribute\\Value"]],p=t[n["Unit Attribute\\Value"]],h="";r=(e/l*100).toFixed(0),$("#fundPercentageLoaded").css("width",r+"%"),$("#fundPercentageLoaded p").html("Funds Loaded: "+r+"%");var f=t[1].split("\\");f.length>1&&f.shift(),f.push(t[4]),f.push(t[6]),f.push(t[9]),f.push(t[8]),f.push(parseInt(t[7])),f.push(t[0]),i.push(f),"Colleges/Units"==c?(s.push(p),$("#collegesUnitsFundsDropdown").append('<option class="hide" data-college="'+p+'" value="'+d+'">'+u+"</option>")):("Scholarships"==c||"The UC Fund"==c||"UC Health"==c)&&("The UC Fund"!=c&&(h="hide"),$("#designationAreaDropdown").append('<option data-area="'+c+'" class="'+h+'" value="'+d+'">'+u+"</option>")),o.push(a)}),$("#fundPercentageLoaded").fadeOut(2e3),$("#designationAreaDropdown option:first").text("-- Select The UC Fund to Support --");var d=s.sort();function u(e,t,a){return a.indexOf(e)===t}var c=d.filter(u),p=function e(t){for(var a=[],n={},i=0,o=t.length;i<o;i++){var s=JSON.stringify(t[i]);!n[s]&&(a.push(t[i]),n[s]=!0)}return a}(i),h=[];$.each(c,function(e,t){var a=$.trim(t.substring(t.indexOf("-")+1));h.push(a),$("#collegesUnitsDropdown").append($("<option></option>").val(t).text(a))}),$("#collegesUnitsDropdown option:not(:first)").sort(function e(t,a){return $(a).text().toUpperCase()<$(t).text().toUpperCase()?1:-1}).appendTo("select#collegesUnitsDropdown");var f,g=o.filter(u).sort();$("#scrollable-dropdown-menu .typeahead").typeahead({hint:!0,highlight:!0,minLength:1},{name:"typeaheadArr",limit:100,source:(f=g,function e(t,a){var n;n=[],substrRegex=RegExp(t,"i"),$.each(f,function(e,t){substrRegex.test(t)&&n.push(t)}),a(n)})}),$(".typeahead").bind("typeahead:select",function(e,t){$("#hiddenFund").val(t),console.log(t),$.each(p,function(e,a){a[6]===t&&$("#hiddenGuid").val(a[2])})})})},designationSearch:function(){var e=$("#txtDesignationPreDefined"),t=new BLACKBAUD.api.QueryService,a=[];t.getResults(BBI.Defaults.advancedDonationFormFundsQueryId,function(t){var n=t.Fields,i=t.Rows,o=[];$.each(n,function(e,t){o[t.Name]=e}),$.each(i,function(){var e=this.Values;a.push({value:e[6],label:e[1],parent:e[8],collegeUnit:e[9]})});var s=BBI.Methods.returnQueryValueByName("fund"),l=BBI.Methods.returnQueryValueByName("area"),r=BBI.Methods.returnQueryValueByName("unit");if(s||l){console.log(l),"ucfund"==l?$('#areasToSuppportRadioGroup input[name=area][value="ucFund"]').prop("checked",!0).trigger("change"):"scholarships"==l?$('#areasToSuppportRadioGroup input[name=area][value="scholarships"]').prop("checked",!0).trigger("change"):"college"==l?($('#areasToSuppportRadioGroup input[name=area][value="collegeUnits"]').prop("checked",!0).trigger("change"),r&&($("select#collegeUnitsSelect").find('option[value^="'+r+'"]').prop("selected",!0).trigger("change"),s&&(console.log("Select fund!"),$("select#collegeUnitsFundSelect").find('option[value^="'+s+'"]').prop("selected",!0).trigger("change")))):"uchealth"==l?$('#areasToSuppportRadioGroup input[name=area][value="ucHealth"]').prop("checked",!0).trigger("change"):console.log("not found");var d=a.filter(function(e){return e.value===s})[0];if(null!=d){var u=d.label,c=d.parent,p=d.collegeUnit;console.table(d);var h=d.parent;"UC Health"==h?console.log("it's "+h):"Scholarships"==h?console.log("it's "+h):"The UC Fund"==h?console.log("it's "+h):"Colleges/Units"==h?console.log("it's "+h):console.log("none of these!"),e.val(u),e.attr("parent",c),$("#fundArea").val(c),$("#collegeUnit").val(p),$("#fundGuid").val(s),$("#fundName").val(u)}e.attr("desId",s)}})},populateAreasToSupportFields:function(){var e=$("select#ucFundSelect"),t=$("select#ucHealthSelect"),a=$("select#scholarshipsSelect"),n=$("select#collegeUnitsSelect"),i=$("select#collegeUnitsFundSelect");new BLACKBAUD.api.QueryService().getResults(BBI.Defaults.advancedDonationFormFundsQueryId,function(o){var s=o.Rows,l=[],r=[],d=[],u=[],c=[],p=[];$(e,a,n).find("option").not("option:first").remove(),$.each(s,function(){var e=this.Values,t=e[1].split("\\");t.length>1&&t.shift(),t.push(e[4]),t.push(e[6]),t.push(e[9]),t.push(e[8]),t.push(parseInt(e[7])),l.push(t),"Colleges/Units"==e[8]?r.push(e[9]):"The UC Fund"==e[8]?u.push(t):"Scholarships"==e[8]?c.push(t):"UC Health"==e[8]&&p.push(t);var a=e[1];e[6],d.push(a)});var h=function e(t){for(var a=[],n={},i=0,o=t.length;i<o;i++){var s=JSON.stringify(t[i]);!n[s]&&(a.push(t[i]),n[s]=!0)}return a}(l);function f(e,t,a){return a.indexOf(e)===t}var g=r.filter(f).sort();$.each(g,function(e,t){var a=$.trim(t.substring(t.indexOf("-")+1));$(n).append($("<option></option>").val(t).text(a))}),$("select#collegeUnitsSelect option:not(:first)").sort(function e(t,a){return $(a).text().toUpperCase()<$(t).text().toUpperCase()?1:-1}).appendTo("select#collegeUnitsSelect"),h.sort(function(e,t){return e[5]-t[5]}),$.each(h,function(n,i){if("The UC Fund"==i[4])$(e).append($("<option></option>").val(i[2]).text(i[0]));else if("Scholarships"==i[4])$(a).append($("<option></option>").val(i[2]).text(i[0]));else{if("UC Health"!=i[4])return;$(t).append($("<option></option>").val(i[2]).text(i[0]))}}),$("#areasToSuppportRadioGroup select").prop("disabled",!1);var m=[];$("#ucFundSelect option").each(function(){$.inArray(this.value,m)>-1?$(this).remove():m.push(this.value)});var v=[];$("#scholarshipsSelect option").each(function(){$.inArray(this.value,v)>-1?$(this).remove():v.push(this.value)});var b,B=d.filter(f).sort();function I(e){e=!0,$(".validation-icon.fund i").removeClass("fa-times-circle").addClass("fa-check-circle")}$(".toggleOtherFund").click(function(e){e.preventDefault(),I(!1),$("#advanced-search-fund").val(""),$(this).next().slideDown()}),$("#scrollable-dropdown-menu .typeahead").typeahead({hint:!0,highlight:!0,minLength:1},{name:"typeaheadArr",limit:100,source:(b=B,function e(t,a){var n;n=[],substrRegex=RegExp(t,"i"),$.each(b,function(e,t){substrRegex.test(t)&&n.push(t)}),a(n)})}),$(".typeahead").bind("typeahead:select",function(e,t){$("#fundName").val(t),$.each(h,function(e,a){a[0]===t&&($("#fundGuid").val(a[2]),I(!0))})}),$(n).on("change",function(){var e=$(this).val();console.log(e),$(i).find("option").not("option:first").remove(),$.each(h,function(t,a){a[3]===e&&"Colleges/Units"==a[4]&&$(i).append($("<option></option>").val(a[2]).text(a[0]))})}),BBI.Methods.designationSearch()})},populateTypeaheadField:function(){var e=$("select#ucFundSelect");$("select#ucHealthSelect");var t=$("select#scholarshipsSelect"),a=$("select#collegeUnitsSelect");$("select#collegeUnitsFundSelect"),new BLACKBAUD.api.QueryService().getResults(BBI.Defaults.advancedDonationFormFundsQueryId,function(n){var i,o=n.Rows,s=[],l=[],r=[];$(e,t,a).find("option").not("option:first").remove(),$.each(o,function(){var e=this.Values,t=e[0].split("\\");t.length>1&&t.shift(),t.push(e[4]),t.push(e[6]),t.push(e[9]),t.push(e[8]),s.push(t),"Colleges/Units"==e[8]&&l.push(e[9]);var a=e[0];e[6],r.push(a)});var d,u=function e(t){for(var a=[],n={},i=0,o=t.length;i<o;i++){var s=JSON.stringify(t[i]);!n[s]&&(a.push(t[i]),n[s]=!0)}return a}(s.sort()),c=l.filter(function e(t,a,n){return n.indexOf(t)===a}).sort();$.each(c,function(e,t){var n=$.trim(t.substring(t.indexOf("-")+1));$(a).append($("<option></option>").val(t).text(n))}),$("#scrollable-dropdown-menu .typeahead").typeahead({hint:!1,highlight:!0,minLength:1},{name:"typeaheadArr",limit:100,source:(i=r,function e(t,a){var n;n=[],substrRegex=RegExp(t,"i"),$.each(i,function(e,t){substrRegex.test(t)&&n.push(t)}),a(n)})}),$(".typeahead").bind("typeahead:select",function(e,t){$("#fundName").val(t),$.each(u,function(e,a){a[0]===t&&(console.log(a[2]),$("#fundGuid").val("https://foundation.uc.edu/donate?id="+a[2]))})}),$("#copyButton").click(function(e){e.preventDefault();var t=document.getElementById("fundGuid");t.select(),t.setSelectionRange(0,99999),document.execCommand("copy"),console.log("https://foundation.uc.edu/donate?id="+t.value)})})},populateCountryDropdowns:function(){new BLACKBAUD.api.CountryService({url:BBI.Defaults.rootpath,crossDomain:!1}).getCountries(function(e){$.each(e,function(){$("#personalCountry").append($("<option></option>").val(this.Description).text(this.Description).attr("id",this.Id))}),BBI.Methods.populateStateDropdowns($("#personalCountry").find('[value="United States"]').attr("id")),$.each(e,function(){$("#ackCountry").append($("<option></option>").val(this.Description).text(this.Description).attr("id",this.Id))}),BBI.Methods.populateAckStateDropdowns($("#ackCountry").find('[value="United States"]').attr("id")),$("#ackCountry").val("United States").on("change",function(){var e=$(this).find(":selected").attr("id");BBI.Methods.populateAckStateDropdowns(e)}),$("#personalCountry").val("United States").on("change",function(){var e=$(this).find(":selected").attr("id");BBI.Methods.populateStateDropdowns(e)})})},populateStateDropdowns:function(e){new BLACKBAUD.api.CountryService({url:BBI.Defaults.rootpath,crossDomain:!1}).getStates(e,function(e){$("#personalState option:gt(0)").remove(),$.each(e,function(){$("#personalState").append($("<option></option>").val(this.Abbreviation).text(this.Description))}),1==document.getElementById("personalState").length?$(".personalState-container").addClass("hide"):$(".personalState-container").removeClass("hide")})},populateAckStateDropdowns:function(e){new BLACKBAUD.api.CountryService({url:BBI.Defaults.rootpath,crossDomain:!1}).getStates(e,function(e){$("#ackState option:gt(0)").remove(),$.each(e,function(){$("#ackState").append($("<option></option>").val(this.Abbreviation).text(this.Description))})})},populateTitle:function(){var e=$("#ackTitle");$.get(BLACKBAUD.api.pageInformation.rootPath+"webapi/CodeTable/"+BBI.Defaults.titleTable,function(t){for(var a=0,n=t.length;a<n;a++)e.append('<option value="'+t[a].Id+'">'+t[a].Description+"</option>")}).done(function(){e.val("-1").change()})},populateDesignationIds:function(){new BLACKBAUD.api.QueryService().getResults(BBI.Defaults.highlightedFundsQueryId,function(e){var t=e.Fields,a=e.Rows,n=[];$.each(t,function(e,t){n[t.Name]=e}),$.each(a,function(){var e=this.Values,t=e[n["System record ID"]],a=e[n["Public name"]];$(".designationButtonWrapper").append('<li class="designationButton"><a rel="'+t+'">'+a+"</a></li>")}),$(".designationButton a").on("click",function(){$(".designationButton .selected").removeClass("selected"),$(this).addClass("selected"),$("#designationId").val($(this).attr("rel")),$("#fundDesignation1").val("0"),$("#fundDesignation2").val("0").hide()})})},populateCustomDesignationIds:function(){new BLACKBAUD.api.QueryService().getResults(BBI.Defaults.highlightedUcgniFundsQueryId,function(e){var t=e.Fields,a=e.Rows,n=[];console.log(t),console.log(a),$.each(t,function(e,t){n[t.Name]=e}),$.each(a,function(){var e=this.Values;e[n["System record ID"]],e[n["Public name"]]})})},populateCustomCascadingFields:function(){var e=$("#fundDesignation1"),t=$("#fundDesignation2"),a=$("#funds"),n=$("#fundsResult");0!==$(e).length&&new BLACKBAUD.api.QueryService().getResults(BBI.Defaults.cascadingFundsQueryId,function(i){var o=i.Rows,s=[],l=[];$(e).find("option").not("option:first").remove(),$.each(o,function(){var e=this.Values,t=e[3].split("\\");t.length>1&&t.shift(),t.push(e[5]),t.push(e[2]),s.push(t),l.push(t[0])});var r=l.filter(function e(t,a,n){return n.indexOf(t)===a});$.each(r,function(t,n){$(a).append($("<span class='btn btn-primary' data-group='"+n+"' >"+n+"</span>")),$(e).append($("<option></option>").val(n).text(n))}),0==$(a).length||$.each(s,function(e,t){$(n).append($("<div data-group='"+t[0]+"' style='display:none;'>"+t[2]+"</div>"))}),$("#funds span").on("click",function(){$(this).hasClass("active")||($("#funds span.active").removeClass("active"),$(this).addClass("active"));var e=$(this).data("group");console.log(e),$(n).find("div").hide(500),$('#fundsResult div[data-group="'+e+'"]').each(function(e){$(this).show(500)})}),$(e).on("change",function(){$(".designationButton .selected").removeClass("selected");var e=$(this).val();$(t).find("option").not("option:first").remove(),$.each(s,function(a,n){n[0]===e&&$(t).append($("<option></option>").val(n[1]).text(n[2]))}),"0"===$(this).val()?$(t).hide():$(t).show()})})},populateCascadingFields:function(){var e=$("#fundDesignation1"),t=$("#fundDesignation2");0!==$(e).length&&new BLACKBAUD.api.QueryService().getResults(BBI.Defaults.cascadingFundsQueryId,function(a){var n=a.Rows,i=[],o=[];$(e).find("option").not("option:first").remove(),$.each(n,function(){var e=this.Values,t=e[3].split("\\");t.length>1&&t.shift(),t.push(e[5]),t.push(e[2]),i.push(t),o.push(t[0])});var s=o.filter(function e(t,a,n){return n.indexOf(t)===a});$.each(s,function(t,a){$(e).append($("<option></option>").val(a).text(a))}),$(e).on("change",function(){$(".designationButton .selected").removeClass("selected");var e=$(this).val();$(t).find("option").not("option:first").remove(),$.each(i,function(a,n){n[0]===e&&$(t).append($("<option></option>").val(n[1]).text(n[2]))}),"0"===$(this).val()?$(t).hide():$(t).show()})})},initAdfTabs:function(){$("#adfTributToggle").show(),$("#adfFrequency").hide(),$("#adfTabsMenu a").on("click",function(){var e=$(this).attr("id");$("#adfTabsMenu .selected").removeClass("selected"),$(this).parent("li").addClass("selected"),"tabRecurring"===e?($("#adfTributToggle").hide(),$("#adfFrequency").show()):("tabPledge"===e||"tabFaculty"===e||$("#adfTributToggle").show(),$("#adfFrequency").hide())})},validationMarkers:function(){$('<span class="marker"></span>').insertBefore("input.required")},validateADF:function(){$(".invalidLabel.adfNote").remove(),$(".invalid").removeClass("invalid");var e=!0;return $("input.required:visible, select.required:visible").each(function(){(""===$.trim($(this).val())||"-1"==$(this).val())&&(e=!1,$(this).addClass("invalid"),$(this).after('<span class="invalidLabel adfNote"><i class="fa fa-exclamation-circle"></i>This is a required field.</span>'))}),$("#giftListEmpty").is(":visible")&&(e=!1,$(".BBFormValidatorSummary").html('<p class="giftAmountError">Please add an item to your cart.</p>')),$(".invalid").first().focus(),$(".invalid").on("keydown",function(){$(this).unbind("keydown"),$(this).removeClass("invalid"),$(this).parent().find(".invalidLabel").remove()}),e},getDonationData:function(){var e=$(".BBDonationApiContainer").attr("data-partid"),t=new BLACKBAUD.api.DonationService(e,{url:BBI.Defaults.rootpath,crossDomain:!1}),a=($("#custom-amount").val(),$("#designationId").val(),[]),n={Gift:{Designations:[],IsAnonymous:!1,Attributes:[],MerchantAccountId:BBI.Defaults.MerchantAccountId},Origin:{PageId:BBI.Defaults.pageId,PageName:"Giving Form V2"}};let i=$("#personalTitle option:selected").text().trim(),o=$("#personalFirstName").val(),s=$("#personalLastName").val(),l=$("#personalAddress").val(),r=$("#personalAddressType option:selected").val(),d=$("#personalCountry option:selected").text().trim(),u=$("#personalCity").val(),c=$("#personalState option:selected").val(),p=$("#personalZip").val(),h=$("#personalPhone").val(),f=$("#personalEmail").val(),g=$("#personalEmailType option:selected").val(),m=$("#pledgeId").val(),v=$("#pledgeAmount").val();localStorage.setItem("billingtitle",i),localStorage.setItem("firstName",o),localStorage.setItem("lastName",s),localStorage.setItem("address",l),localStorage.setItem("addresstype",r),localStorage.setItem("address",l),localStorage.setItem("country",d),localStorage.setItem("city",u),localStorage.setItem("state",c),localStorage.setItem("zipcode",p),localStorage.setItem("phone",h),localStorage.setItem("emailaddresstype",g),localStorage.setItem("emailaddress",f),"Pledge"!=$("#giftTypeSelect").val()&&$(".fund-card").not(".empty, .proc-fee:hidden").each(function(){var e={Amount:$(this).find("input").val(),DesignationId:$(this).find(".fund-guid").text()};n.Gift.Designations.push(e)});try{if("-1"!==$("#personalTitle").val()&&(n.Donor.Title=$("#personalTitle option:selected").text()),$("#matchingGift").is(":checked")){var b={AttributeId:BBI.Defaults.matchingGift,Value:"True"};if(n.Gift.Attributes.push(b),""!==$("#matchingGiftSearch").val()){var B={AttributeId:BBI.Defaults.matchingGiftCompanyName,Value:$("#matchingGiftName").val()};n.Gift.Attributes.push(B)}}$("#corporateGift").is(":checked")&&(n.Gift.IsCorporate=!0,n.Donor.OrganizationName=$("#companyName").val())}catch(I){console.log(I)}if(""!==$("#comments").val()&&(n.Gift.Comments=$.trim($("#comments").val())),0!==$("#anonymous:checked").length&&(n.Gift.IsAnonymous=!0),0!==$("input#honorOf:checked").length){if(0!==$("#tributeType:visible").length){var y={AttributeId:BBI.Defaults.customADFAttributes["Tribute Gift Type"],Value:$("#tributeType option:selected").val()};a.push(y)}if(0!==$("#tributeFirstName").length&&0!==$("#tributeLastName").length){var D={AttributeId:BBI.Defaults.customADFAttributes["Honoree Name"],Value:$("#tributeFirstName").val()+" "+$("#tributeLastName").val()};a.push(D)}}if(0!==$("input#mailLetter:checked").length){if(0!==$("#ackFirstName").length){var A={AttributeId:BBI.Defaults.customADFAttributes["Acknowledgee First Name"],Value:$("#ackFirstName").val()};a.push(A)}if(0!==$("#ackLastName").length){var _={AttributeId:BBI.Defaults.customADFAttributes["Acknowledgee Last Name"],Value:$("#ackLastName").val()};a.push(_)}if(0!==$("#ackAddress").length){var C={AttributeId:BBI.Defaults.customADFAttributes["Acknowledgee Address"],Value:$("#ackAddress").val()};a.push(C)}if(0!==$("#ackCity").length){var S={AttributeId:BBI.Defaults.customADFAttributes["Acknowledgee City"],Value:$("#ackCity").val()};a.push(S)}if(0!==$("#ackState").length){var F={AttributeId:BBI.Defaults.customADFAttributes["Acknowledgee State"],Value:$("#ackState option:selected").val()};a.push(F)}if(0!==$("#ackZipCode").length){var w={AttributeId:BBI.Defaults.customADFAttributes["Acknowledgee Zip"],Value:$("#ackZipCode").val()};a.push(w)}if(0!==$("#ackCountry").length){var k={AttributeId:BBI.Defaults.customADFAttributes["Acknowledgee Country"],Value:$("#ackCountry option:selected").text()};a.push(k)}if(0!==$("#ackPhoneNumber").length&&""!==$("#ackPhoneNumber").val()){var T={AttributeId:BBI.Defaults.customADFAttributes["Acknowledgee Phone"],Value:$("#ackPhoneNumber").val()};a.push(T)}if(0!==$("#ackEmail").length&&""!==$("#ackEmail").val()){var x={AttributeId:BBI.Defaults.customADFAttributes["Acknowledgee Email"],Value:$("#ackEmail").val()};a.push(x)}}if(n.Gift.Attributes=a,"Monthly"==$("#giftTypeSelect").val()){console.log("Monthly check");var M=$("#startDate").datepicker("getDate"),N=M.getDay(),L=M.getDate(),U=(M.getMonth(),$("#frequency").val());1==U?n.Gift.Recurrence={DayOfWeek:N,Frequency:U,StartDate:M}:n.Gift.Recurrence={DayOfMonth:L,Frequency:U,StartDate:M}}if("Pledge"==$("#giftTypeSelect").val()){console.log("Pledge check");var V={AttributeId:BBI.Defaults.customADFAttributes["Pledge ID"],Value:m};a.push(V),n.Gift.Designations=[{Amount:v,DesignationId:BBI.Defaults.pledgeFund}],n.Gift.Attributes=a}if(n.Gift.PaymentMethod,BBI.Methods.returnQueryValueByName("efndnum")&&(n.Gift.FinderNumber=BBI.Methods.returnQueryValueByName("efndnum")),BBI.Methods.returnQueryValueByName("source")&&(n.Gift.SourceCode=BBI.Methods.returnQueryValueByName("source")),BBI.Methods.returnQueryValueByName("appeal")&&(n.Origin.AppealId=BBI.Methods.returnQueryValueByName("appeal")),window.location.pathname.toLowerCase().startsWith("/fye")){var P={AppealId:"96eacba5-3a64-4c20-9461-63a743044717",PageId:BLACKBAUD.api.pageInformation.pageId};n.Origin=P}if(window.location.pathname.toLowerCase().startsWith("/college-of-medicine")){var P={AppealId:"47E0774C-8A1A-4A18-92AA-6EFBDBE7800F",PageId:BLACKBAUD.api.pageInformation.pageId};n.Origin=P}if(0!==$("#wantOrnament:checked").length){var E={AttributeId:BBI.Defaults.wantOrnament,Value:"Yes"};n.Gift.Attributes.push(E)}else{var E={AttributeId:BBI.Defaults.wantOrnament,Value:"No"};n.Gift.Attributes.push(E)}donationSuccess=function(e){console.log(n)},donationFail=function(e){$(".BBFormValidatorSummary").html("<p>"+BBI.Methods.convertErrorsToHtml(e)+"</p>"),$("#adfSubmit").on("click",function(e){e.preventDefault(),$(this).addClass("disabled").unbind("click"),BBI.Methods.getDonationData()}).removeClass("disabled")},console.log(n),t.createDonation(n,donationSuccess,donationFail)},isProcessNow:function(){$("#recurringGift").is(":checked")?(e=$("#frequency").val(),t=new Date($("#startDate").attr("data-date"))):$("#pledgeGift").is(":checked")&&(e=$("#pledgeFrequency").val(),t=new Date($("#pledgeStartDate").attr("data-date")));var e,t,a=t.getDate(),n=t.getMonth()+1,i=BBI.Defaults.serverDate,o=t,s=!1,l=!1;return o.getFullYear()===i.getFullYear()&&o.getMonth()===i.getMonth()&&o.getDate()===i.getDate()&&(s=!0,l="2"===e||"3"===e?s&&a===i.getDate():"4"===e&&s&&a===i.getDate()&&n===i.getMonth()+1)},submitQueryADF:function(){var e=$(".BBDonationApiContainer").attr("data-partid"),t=new BLACKBAUD.api.DonationService(e,{url:BBI.Defaults.rootpath,crossDomain:!1}),a=($(".miniInputText").val(),$("#designationId").val(),[]),n=[],i={Gift:{Designations:[],IsAnonymous:!1,MerchantAccountId:BBI.Defaults.MerchantAccountId}};if(0!==$("#anonymous:checked").length&&(i.Gift.IsAnonymous=!0),0!==$("input#tribute:checked").length){if(0!==$("#tributeType:visible").length){var o={AttributeId:BBI.Defaults.customADFAttributes["Tribute Gift Type"],Value:$("#tributeType").val()};a.push(o)}if(0!==$("#honoreeFirstName").length&&0!==$("#honoreeLastName").length){var s={AttributeId:BBI.Defaults.customADFAttributes["Honoree Name"],Value:$("#honoreeFirstName").val()+" "+$("#honoreeLastName").val()};a.push(s)}}if(0!==$("input#ackCheck:checked").length){if(0!==$("#ackTitle").length&&"-1"!==$("#ackTitle").val()){var l={AttributeId:BBI.Defaults.customADFAttributes["Acknowledgee Title"],Value:$("#ackTitle option:selected").text()};a.push(l)}if(0!==$("#ackFirstName").length){var r={AttributeId:BBI.Defaults.customADFAttributes["Acknowledgee First Name"],Value:$("#ackFirstName").val()};a.push(r)}if(0!==$("#ackLastName").length){var d={AttributeId:BBI.Defaults.customADFAttributes["Acknowledgee Last Name"],Value:$("#ackLastName").val()};a.push(d)}if(0!==$("#ackAddressLines").length){var u={AttributeId:BBI.Defaults.customADFAttributes["Acknowledgee Address"],Value:$("#ackAddressLines").val()};a.push(u)}if(0!==$("#ackCity").length){var c={AttributeId:BBI.Defaults.customADFAttributes["Acknowledgee City"],Value:$("#ackCity").val()};a.push(c)}if(0!==$("#ackState").length){var p={AttributeId:BBI.Defaults.customADFAttributes["Acknowledgee State"],Value:$("#ackState").val()};a.push(p)}if(0!==$("#ackPostalCode").length){var h={AttributeId:BBI.Defaults.customADFAttributes["Acknowledgee Zip"],Value:$("#ackPostalCode").val()};a.push(h)}if(0!==$("#ackCountry").length){var f={AttributeId:BBI.Defaults.customADFAttributes["Acknowledgee Country"],Value:$("#ackCountry").val()};a.push(f)}if(0!==$("#ackPhone").length&&""!==$("#ackPhone").val()){var g={AttributeId:BBI.Defaults.customADFAttributes["Acknowledgee Phone"],Value:$("#ackPhone").val()};a.push(g)}if(0!==$("#ackEmail").length&&""!==$("#ackEmail").val()){var m={AttributeId:BBI.Defaults.customADFAttributes["Acknowledgee Email"],Value:$("#ackEmail").val()};a.push(m)}}if(0!==$("#company:visible").length){console.log($("#company").val());var v={AttributeId:BBI.Defaults.customADFAttributes["Matching Gift Company"],Value:$("#company").val()};a.push(v)}if(0!==$("#spouseName:visible").length){var b={AttributeId:BBI.Defaults.customADFAttributes["Joint Spouse Name"],Value:$("#spouseName").val()};a.push(b)}if(0!==$("#pledgeID:visible").length){console.log($("#pledgeID").val());var B={AttributeId:BBI.Defaults.customADFAttributes["Pledge ID"],Value:$("#pledgeID").val()};a.push(B)}if(0!==$("#frequency:visible").length){console.log($("#frequency option:selected").val());var I=$("#startDate").datepicker("getDate"),y=I.getDay(),D=I.getDate(),A=(I.getMonth(),$("#frequency").val());1==A?i.Gift.Recurrence={DayOfWeek:y,Frequency:A,StartDate:I}:i.Gift.Recurrence={DayOfMonth:D,Frequency:A,StartDate:I}}if(0!==$("#otherArea:visible").length&&$("#otherArea:visible").val().length>0){var _={Value:$("#otherArea").val()};i.Gift.Comments.push(_)}i.Gift.Attributes=a;var C=$(".toggleGiftType input:checked").val();if("OneTime"==C||"Monthly"==C){var S=$("#giftListNotEmpty > table > tbody > tr");$.each(S,function(){var e=$(this).find("input").val().trim(),t=$(this).find(".fund-designation").text();n.push({Amount:e,DesignationId:t})}),i.Gift.Designations=n}else i.Gift.Designations=[{Amount:$("#hiddenAmount").val(),DesignationId:BBI.Defaults.pledgeFund},];donationSuccess=function(e){},donationFail=function(e){$(".BBFormValidatorSummary").html("<p>"+BBI.Methods.convertErrorsToHtml(e)+"</p>"),$("#adfSubmitButtonQS").on("click",function(e){e.preventDefault(),$(this).addClass("disabled").unbind("click"),BBI.Methods.submitQueryADF()}).removeClass("disabled")},t.createDonation(i,donationSuccess,donationFail)},submitCustomADF:function(){var e=$(".BBDonationApiContainer").attr("data-partid"),t=new BLACKBAUD.api.DonationService(e,{url:BBI.Defaults.rootpath,crossDomain:!1}),a=($(".miniInputText.currency").val(),$("#designationId").val(),[]),n={Gift:{Designations:[],IsAnonymous:!1,MerchantAccountId:BBI.Defaults.MerchantAccountId}},i=document.getElementById("params"),o=document.getElementById("results");document.querySelector("input").addEventListener("keyup",function(){i.innerText=this.value,o.innerText=JSON.stringify(function e(t){var a=t?t.split("?")[1]:window.location.search.slice(1),n={};if(a)for(var i=(a=a.split("#")[0]).split("&"),o=0;o<i.length;o++){var s=i[o].split("="),l=s[0],r=void 0===s[1]||s[1];if(l=l.toLowerCase(),"string"==typeof r&&(r=r.toLowerCase()),l.match(/\[(\d+)?\]$/)){var d=l.replace(/\[(\d+)?\]/,"");if(n[d]||(n[d]=[]),l.match(/\[\d+\]$/)){var u=/\[(\d+)\]/.exec(l)[1];n[d][u]=r}else n[d].push(r)}else n[l]?(n[l]&&"string"==typeof n[l]&&(n[l]=[n[l]]),n[l].push(r)):n[l]=r}return n}("http://test.com/?"+this.value),null,2)}),0!==$("#anonymous:checked").length&&(n.Gift.IsAnonymous=!0),n.Gift.Attributes=[];var s=$("#customAmount[type=radio]").val(),l=$("#hiddenGuid").val();a.push({Amount:s,DesignationId:l}),n.Gift.Designations=a,donationSuccess=function(e){},donationFail=function(e){$(".BBFormValidatorSummary").html("<p>"+BBI.Methods.convertErrorsToHtml(e)+"</p>"),$("#adfSubmitButtonCustom").on("click",function(e){e.preventDefault(),BBI.Methods.validateADF()&&($(this).addClass("disabled").unbind("click"),BBI.Methods.submitCustomADF())}).removeClass("disabled")},t.createDonation(n,donationSuccess,donationFail)},gf2SubmitADF:function(){var e=$(".BBDonationApiContainer").attr("data-partid"),t=new BLACKBAUD.api.DonationService(e,{url:BBI.Defaults.rootpath,crossDomain:!1}),a=$("#custom-amount").val(),n=($("#designationId").val(),[]),i={Gift:{Designations:[],IsAnonymous:!1,MerchantAccountId:BBI.Defaults.MerchantAccountId}};let o=document.getElementById("fundSelect").value.trim();n.push({Amount:a,DesignationId:o}),i.Gift.Designations=n,i.Gift.Recurrence={DayOfWeek:1,Frequency:1,StartDate:"Fri Jan 15 2021",EndDate:"Fri Jan 22 2021"},donationSuccess=function(e){console.log(e)},donationFail=function(e){$(".BBFormValidatorSummary").html("<p>"+BBI.Methods.convertErrorsToHtml(e)+"</p>"),$("#adfSubmitButton").on("click",function(e){e.preventDefault(),$(this).addClass("disabled").unbind("click"),BBI.Methods.submitADF()}).removeClass("disabled")},console.log(i),t.createDonation(i,donationSuccess,donationFail)},submitADF:function(){var e=$(".BBDonationApiContainer").attr("data-partid"),t=new BLACKBAUD.api.DonationService(e,{url:BBI.Defaults.rootpath,crossDomain:!1}),a=($(".miniInputText.currency").val(),$("#designationId").val()),n=[],i=[],o={Gift:{Designations:[],IsAnonymous:!1,MerchantAccountId:BBI.Defaults.MerchantAccountId}},s=document.getElementById("params"),l=document.getElementById("results");document.querySelector("input").addEventListener("keyup",function(){s.innerText=this.value,l.innerText=JSON.stringify(function e(t){var a=t?t.split("?")[1]:window.location.search.slice(1),n={};if(a)for(var i=(a=a.split("#")[0]).split("&"),o=0;o<i.length;o++){var s=i[o].split("="),l=s[0],r=void 0===s[1]||s[1];if(l=l.toLowerCase(),"string"==typeof r&&(r=r.toLowerCase()),l.match(/\[(\d+)?\]$/)){var d=l.replace(/\[(\d+)?\]/,"");if(n[d]||(n[d]=[]),l.match(/\[\d+\]$/)){var u=/\[(\d+)\]/.exec(l)[1];n[d][u]=r}else n[d].push(r)}else n[l]?(n[l]&&"string"==typeof n[l]&&(n[l]=[n[l]]),n[l].push(r)):n[l]=r}return n}("http://test.com/?"+this.value),null,2)});var r=function e(t){var a,n,i=window.location.search.substring(1).split("&");for(n=0;n<i.length;n++)if((a=i[n].split("="))[0]===t)return void 0===a[1]||decodeURIComponent(a[1].toLowerCase())},d=r("appeal"),u=r("efndnum");if(d){var c={AppealId:d,PageId:BLACKBAUD.api.pageInformation.pageId};o.Origin=c}if(u&&(o.Gift.FinderNumber=u),window.location.href.indexOf("giving-page")>-1){var c={AppealId:"6740fcbf-aa98-44bf-87d2-a69ba1f8d216",PageId:BLACKBAUD.api.pageInformation.pageId};o.Origin=c}if(window.location.pathname.toLowerCase().startsWith("/givetoday")){var c={AppealId:"BF7730F5-C275-4C2F-A08C-A33A29F2FBBA",PageId:BLACKBAUD.api.pageInformation.pageId};o.Origin=c}if(window.location.pathname.toLowerCase().startsWith("/impact2016")){var c={AppealId:"b76d6373-51f0-4268-a35c-92bb1c8de65f",PageId:BLACKBAUD.api.pageInformation.pageId};o.Origin=c}if(window.location.pathname.toLowerCase().startsWith("/givetoday")){var c={AppealId:"55a0b0ac-ed24-470e-b42f-5a537eca152f",PageId:BLACKBAUD.api.pageInformation.pageId};o.Origin=c}if(window.location.pathname.toLowerCase().startsWith("/fye")){var c={AppealId:"96eacba5-3a64-4c20-9461-63a743044717",PageId:BLACKBAUD.api.pageInformation.pageId};o.Origin=c}if(0!==$("#anonymous:checked").length&&(o.Gift.IsAnonymous=!0),0!==$("#giftListNotEmpty .otherDesignation").length&&(o.Gift.Comments="Area of support: "+$("#giftListNotEmpty .otherDesignation .fund-name").text()),"0"!==$("#fundDesignation2 option:selected").val()&&(a=$("#fundDesignation2 option:selected").val()),0!==$("input#tribute:checked").length){if(0!==$("#tributeType:visible").length){var p={AttributeId:BBI.Defaults.customADFAttributes["Tribute Gift Type"],Value:$("#tributeType").val()};n.push(p)}if(0!==$("#honoreeFirstName").length&&0!==$("#honoreeLastName").length){var h={AttributeId:BBI.Defaults.customADFAttributes["Honoree Name"],Value:$("#honoreeFirstName").val()+" "+$("#honoreeLastName").val()};n.push(h)}}if(0!==$("input#ackCheck:checked").length){if(0!==$("#ackTitle").length&&"-1"!==$("#ackTitle").val()){var f={AttributeId:BBI.Defaults.customADFAttributes["Acknowledgee Title"],Value:$("#ackTitle option:selected").text()};n.push(f)}if(0!==$("#ackFirstName").length){var g={AttributeId:BBI.Defaults.customADFAttributes["Acknowledgee First Name"],Value:$("#ackFirstName").val()};n.push(g)}if(0!==$("#ackLastName").length){var m={AttributeId:BBI.Defaults.customADFAttributes["Acknowledgee Last Name"],Value:$("#ackLastName").val()};n.push(m)}if(0!==$("#ackAddressLines").length){var v={AttributeId:BBI.Defaults.customADFAttributes["Acknowledgee Address"],Value:$("#ackAddressLines").val()};n.push(v)}if(0!==$("#ackCity").length){var b={AttributeId:BBI.Defaults.customADFAttributes["Acknowledgee City"],Value:$("#ackCity").val()};n.push(b)}if(0!==$("#ackState").length){var B={AttributeId:BBI.Defaults.customADFAttributes["Acknowledgee State"],Value:$("#ackState").val()};n.push(B)}if(0!==$("#ackPostalCode").length){var I={AttributeId:BBI.Defaults.customADFAttributes["Acknowledgee Zip"],Value:$("#ackPostalCode").val()};n.push(I)}if(0!==$("#ackCountry").length){var y={AttributeId:BBI.Defaults.customADFAttributes["Acknowledgee Country"],Value:$("#ackCountry").val()};n.push(y)}if(0!==$("#ackPhone").length&&""!==$("#ackPhone").val()){var D={AttributeId:BBI.Defaults.customADFAttributes["Acknowledgee Phone"],Value:$("#ackPhone").val()};n.push(D)}if(0!==$("#ackEmail").length&&""!==$("#ackEmail").val()){var A={AttributeId:BBI.Defaults.customADFAttributes["Acknowledgee Email"],Value:$("#ackEmail").val()};n.push(A)}}if(0!==$("#company:visible").length){var _={AttributeId:BBI.Defaults.customADFAttributes["Matching Gift Company"],Value:$("#company").val()};n.push(_)}if(0!==$("#spouseName:visible").length){var C={AttributeId:BBI.Defaults.customADFAttributes["Joint Spouse Name"],Value:$("#spouseName").val()};n.push(C)}if(0!==$("#pledgeID:visible").length){var S={AttributeId:BBI.Defaults.customADFAttributes["Pledge ID"],Value:$("#pledgeID").val()};n.push(S)}if(0!==$("#frequency:visible").length){var F=$("#startDate").datepicker("getDate"),w=F.getDay(),k=F.getDate(),T=(F.getMonth(),$("#frequency").val());1==T?o.Gift.Recurrence={DayOfWeek:w,Frequency:T,StartDate:F}:o.Gift.Recurrence={DayOfMonth:k,Frequency:T,StartDate:F}}if(0!==$("#otherArea:visible").length&&$("#otherArea:visible").val().length>0){var x={Value:$("#otherArea").val()};o.Gift.Comments.push(x)}if(o.Gift.Attributes=n,$("#tabOneTime, #tabRecurring").parent().hasClass("selected")){var M=$("#giftListNotEmpty > table > tbody > tr");$.each(M,function(){var e=$(this).find(".fund-amount").text().replace("$",""),t=$(this).find(".fund-designation").text();i.push({Amount:e,DesignationId:t})}),o.Gift.Designations=i}else $(".amountButton a").hasClass("selected")?o.Gift.Designations=[{Amount:$(".amountButton a.selected").attr("rel"),DesignationId:BBI.Defaults.pledgeFund},]:$(".amountButton").hasClass("selected")||""===$("#txtAmount2").val()||(o.Gift.Designations=[{Amount:$("#txtAmount2").val(),DesignationId:BBI.Defaults.pledgeFund},]);donationSuccess=function(e){},donationFail=function(e){$(".BBFormValidatorSummary").html("<p>"+BBI.Methods.convertErrorsToHtml(e)+"</p>"),$("#adfSubmitButton").on("click",function(e){e.preventDefault(),BBI.Methods.validateADF()&&($(this).addClass("disabled").unbind("click"),BBI.Methods.submitADF())}).removeClass("disabled")},t.createDonation(o,donationSuccess,donationFail)},convertErrorToString:function(e){if(e){if(e.Message)return e.Message;switch(e.ErrorCode){case 101:return e.Field+" is required.";case 105:return e.Field+" is not valid.";case 106:return"Record for "+e.Field+" was not found.";case 203:return"Donation not completed on BBSP.";case 107:return"Max length for "+e.Field+" exceeded.";default:return"Error code "+e.ErrorCode+"."}}},convertErrorsToHtml:function(e){var t,a="Unknown error.<br/>";if(e)for(t=0,a="";t<e.length;t++)a=a+BBI.Methods.convertErrorToString(e[t])+"<br/>";return a},adminStyleFixes:function(){$('[class*="show-for-"], [class*="hide-for-"], .fullWidthBackgroundImage, .fullWidthBackgroundImageInner').attr("class",""),$("header div").not('[id^="pane"], [id^="pane"] div').css("position","static"),$(".fullWidthBackgroundImageInner").show()},getUrlVars:function(){var e={};return window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(t,a,n){e[a]=unescape(n.replace(/\+/g," "))}),e},returnQueryValueByName:function(e){return BLACKBAUD.api.querystring.getQueryStringValue(e)},fixPositioning:function(){$('div[id *= "_panelPopup"]').appendTo("body"),$('div[id *= "_designPaneCloak"]').css({top:"0px",left:"0px"}),$(".DesignPane").css("position","relative")},setCookie:function(e,t,a){var n=new Date,i=window.location.host.substr(window.location.host.indexOf("."));n.setDate(n.getDate()+a);var o=escape(t)+(null==a?"":"; expires="+n.toUTCString());document.cookie=e+"="+o+"; domain="+i+"; path=/"},readCookie:function(e){for(var t=e+"=",a=document.cookie.split(";"),n=0;n<a.length;n++){for(var i=a[n];" "==i.charAt(0);)i=i.substring(1,i.length);if(0==i.indexOf(t))return i.substring(t.length,i.length)}return null},initMobileHeader:function(){$("#mobileLogo").headroom({offset:80})},mobileSubMenu:function(){$(".mobileCanvas.rightCanvas ul.menu li.parent > a").click(function(e){$(this).parent().hasClass("open")||(e.preventDefault(),$(this).parent().toggleClass("open"),$(this).next().slideToggle())})},urlParameterCheck:function(){var e=BBI.Methods.returnQueryValueByName("type"),t=BBI.Methods.returnQueryValueByName("pledgeid"),a=$("#giftTypeSelect");e&&(console.log(e),"monthly"==e?(a.val("Monthly"),$("fieldset.Pledge.toggle").addClass("hide"),$("fieldset.Monthly.toggle, fieldset.fundSelect").removeClass("hide"),$("fieldset#giftSummary").removeClass("hide"),$("fieldset.fundSelect, #queryLoader").removeClass("hide")):"pledge"==e?(a.val("Pledge"),$("#pledgeId").val(t),$("fieldset.Monthly.toggle, fieldset.fundSelect").addClass("hide"),$("fieldset.Pledge.toggle").removeClass("hide"),$("fieldset#giftSummary").addClass("hide"),$("fieldset.fundSelect, #queryLoader").addClass("hide")):($("fieldset.toggle").addClass("hide"),$("fieldset.fundSelect").removeClass("hide"),$("fieldset#giftSummary, #queryLoader").removeClass("hide")));var n=function e(t){var a,n,i=window.location.search.substring(1).split("&");for(n=0;n<i.length;n++)if((a=i[n].split("="))[0]===t)return void 0===a[1]||decodeURIComponent(a[1].toLowerCase())},i=n("fund"),o=n("unit");setTimeout(function(){$("select#collegeUnitsSelect").find('option[value^="'+o+'"]').prop("selected",!0),i&&($(".toggle .select-section .select select"),$("select").delay(500).find('option[value="'+i+'"]').prop("selected",!0).trigger("change").parents(".toggle").addClass("showSelect"),$("#areasToSuppportRadioGroup div.toggle").not(".showSelect").hide())},750)},queryParameters:function(){let e=e=>"string"!=typeof e?"":e.charAt(0).toUpperCase()+e.slice(1);if(BBI.Methods.returnQueryValueByName("fname")&&$("#personalFirstName").val(e(BBI.Methods.returnQueryValueByName("fname"))),BBI.Methods.returnQueryValueByName("lname")&&$("#personalLastName").val(e(BBI.Methods.returnQueryValueByName("lname"))),BBI.Methods.returnQueryValueByName("adr")){var t;$("#personalAddress").val("string"!=typeof(t=BBI.Methods.returnQueryValueByName("adr"))?"":t.replace(/\w\S*/g,function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()}))}BBI.Methods.returnQueryValueByName("cty")&&$("#personalCity").val(e(BBI.Methods.returnQueryValueByName("cty"))),BBI.Methods.returnQueryValueByName("st")&&$("#personalState").val(BBI.Methods.returnQueryValueByName("st").toUpperCase()),BBI.Methods.returnQueryValueByName("zp")&&$("#personalZip").val(BBI.Methods.returnQueryValueByName("zp")),BBI.Methods.returnQueryValueByName("ph")&&$("#personalPhone").val(BBI.Methods.returnQueryValueByName("ph")),BBI.Methods.returnQueryValueByName("eml")&&$("#personalEmail").val(BBI.Methods.returnQueryValueByName("eml"))},datePicker:function(){if(0!==$("#startDate:visible").length){var e=new Date().getDate();function t(){var t=new Date;return e>15?t.setMonth(t.getMonth()+1,1):1==e||t.setDate(15),t}$("#startDate").datepicker({beforeShowDay:function(e){return[1==e.getDate()||15==e.getDate(),]},minDate:t()}),$("#startDate").datepicker("setDate",t())}},customSingleDonationForm:{tbodyClasses:function(){var e,t,a,n;e=$('[id*="txtAmount"]').parents("tbody").addClass("donationInfo"),t=$('[id*="trDesignation"]').parents("tbody").addClass("additionalInfo"),a=$('[id*="DonationCapture1_txtFirstName"]').parents("tbody").addClass("billingInfo"),n=$('[id*="lblTributeHeading"]').parents("tbody").addClass("tributeInfo")},stepOneGivingDetails:{fundDesignationOption:function(){var e,t;t=$('.additionalInfo select[id*="ddlDesignations"]').children().clone(),$('<select id="fundDesignList"></select>').prependTo("ul.fundDesignation li.fundDesignationList"),e="select#fundDesignList",0===$("ul.fundDesignation li.fundDesignationList select option").length&&$(t).prependTo(e),$("select#fundDesignList option").click(function(){$("select#fundDesignList option:selected").removeAttr("checked","true"),$(this).attr("checked","true")}),$(e).on("change",function(){var e=$("select#fundDesignList option:selected");$('.additionalInfo select[id*="ddlDesignations"]').find('option[value="'+e.val()+'"]').attr("selected",!0)})},clickHiddenAmount:function(){$('input[value="rdoOther"]').click();var e=$('.givingAmountOptions input[name="amount"]:checked').val();$('.DonationFormTable input[id$="txtAmount"]').val(e)},donationAmount:function(){$("#addToCart a").on("click",function(){var e=0;$(".fund-amount").each(function(){var t=$(this).text().replace("$","");isNaN(t)||0==t.length||(e+=parseFloat(t)),$(".adfTotalAmount span").text(e)})})}},stepTwoDonorInfo:{billingName:function(){var e,t,a,n;t=".donorLastName #billingLastName",a='.billingInfo [id*="txtFirstName"]',n='.billingInfo [id*="txtLastName"]',$(e=".donorFirstName #billingFirstName").blur(function(){var e=$(this).val();""!==$(this).val()&&$(a).val(e)}),$(t).blur(function(){var e=$(this).val();""!==$(this).val()&&$(n).val(e)})},billingAddress:function(){var e,t;t='.billingInfo [id*="AddressLine"]',$(e=".personalInfoList #billingAddress").change(function(){var e=$(this).val();""!==$(this).val()&&$(t).val(e)})},billingTitleList:function(){var e,t;t=$('.DonationCaptureFormTable select[id*="Title"]').children().clone(),e=".donorTitle select#nameTitleList",0===$("select#nameTitleList option").length&&$(t).prependTo(e),$("#nameTitleList option:eq(0)").text("Title"),$("select#nameTitleList option").click(function(){$("select#nameTitleList option:selected").removeAttr("checked","true"),$(this).attr("checked","true")}),$(e).on("change",function(){var e=$("select#nameTitleList option:selected");$('.DonationCaptureFormTable select[id*="Title"]').find('option[value="'+e.val()+'"]').attr("selected",!0)})},billingCity:function(){var e,t;t='.billingInfo [id*="City"]',$(e=".wrapCity #billingCity").blur(function(){var e=$(this).val();""!==$(this).val()&&$(t).val(e)})},billingCountryList:function(){var e,t;t=$('.DonationCaptureFormTable [id*="Country"]').children().clone(),e="select#billingCountry",0===$("select#billingCountry option").length&&$(t).prependTo(e),$("select#billingCountry option").click(function(){var e=$("select#billingCountry option:selected");$('.DonationCaptureFormTable [id*="Country"]').find('option[value="'+e.val()+'"]').attr("selected",!0),$('.DonationCaptureFormTable [id*="Country"]').find("option:selected")})},billingStateList:function(){var e,t;t=$('.DonationCaptureFormTable [id*="State"]').children().clone(),e="select#billingState",0===$("select#billingState option").length&&$(t).prependTo(e),$("#billingState option:eq(0)").text("State"),$("select#billingState option").click(function(){$("select#billingState option:selected").removeAttr("checked","true"),$(this).attr("checked","true")}),$(e).on("change",function(){var e=$("select#billingState option:selected");$('.DonationCaptureFormTable [id*="State"]').find('option[value="'+e.val()+'"]').attr("selected",!0)})},billingZip:function(){var e,t;t='.DonationFormTable [id*="Zip"]',$(e=".wrapZip #zip").blur(function(){var e=$(this).val();""!==$(this).val()&&$(t).val(e)})},billingPhone:function(){var e,t;t='.billingInfo [id*="txtPhone"]',$(e=".personalInfoList #billingPhone").blur(function(){var e=$(this).val();""!==$(this).val()&&$(t).val(e)})},billingEmail:function(){var e,t;t='.billingInfo [id*="txtEmailAddress"]',$(e=".personalInfoList #email").blur(function(){var e=$(this).val();""!==$(this).val()&&$(t).val(e)})}},stepThreePaymentInfo:{cardholder:function(){var e,t;t='.paymentInfo [id*="txtCardholder"]',$(e=".paymentInfo #cardholder").keyup(function(){var e=$(this).val();""!==$(this).val()&&$(t).val(e)})},cardNumber:function(){var e,t,a,n,i,o,s,l,r,d;e=".paymentInfo #cardNumber",t='table.DonationFormTable input[id*="txtCardNumber"]',n=RegExp(/^\d{4}-?\d{4}-?\d{4}-?\d{3,4}$/),i=RegExp(/^4$/),o=RegExp(/^5$/),s=RegExp(/^3$/),l=RegExp(/^6$/),r=RegExp(/^(0|1|2|7|8|9)$/),a=$(d=".cardTypeEnt").text(),$(e).keyup(function(){$(this).val().match(i)?($(this).removeClass().addClass("cardTypeVisa"),$(d).html("Visa"),$('table.DonationFormTable select[id*="cboCardType"]').find("option:contains(Visa)").attr("selected","selected")):$(this).val().match(o)?($(this).removeClass().addClass("cardTypeMasterCard"),$(d).html("MasterCard"),$('table.DonationFormTable select[id*="cboCardType"]').find("option:contains(MasterCard)").attr("selected","selected")):$(this).val().match(s)?($(this).removeClass().addClass("cardTypeAmEx"),$(d).html("American Express"),$('table.DonationFormTable select[id*="cboCardType"]').find("option:contains(American)").attr("selected","selected")):$(this).val().match(l)?($(this).removeClass().addClass("cardTypeDiscover"),$(d).html("Discover"),$('table.DonationFormTable select[id*="cboCardType"]').find("option:contains(Discover)").attr("selected","selected")):($(this).val().match(r)||""===$(this).val())&&($(this).removeClass().addClass("cardTypeInvalid"),$(".cardTypeEnt").text(""))}),$(".cardTypeEnt").text(a),$(e).keyup(function(){var t=$(e).val();$(this).val().match(n)?($(this).removeClass("invalid").addClass("valid"),$('input[id*="DonationCapture1_txtCardNumber"]').val(t)):$(this).removeClass("valid").addClass("invalid")}),$(e).blur(function(){var t=$(e).val();$(this).val().match(n)?($(this).removeClass("invalid").addClass("valid"),$('input[id*="DonationCapture1_txtCardNumber"]').val(t)):$(this).removeClass("valid").addClass("invalid")})},cardExp:function(){var e,t,a,n,i,o;e="select#cardExpMonth",t="select#cardExpYr",n='table.DonationFormTable select[id*="cboYear"]',i=$(a='table.DonationFormTable select[id*="cboMonth"]').children().clone(),o=$(n).children().clone(),0===$("select#cardExpMonth option").length&&($(i).appendTo("select#cardExpMonth"),$("select#cardExpMonth option:eq(0)").text("Month")),$(e).change(function(){var e=$("select#cardExpMonth :selected").val();$(a).find('option:contains("'+e+'")').attr("selected","selected")}),0===$("select#cardExpYr option").length&&($(o).appendTo("select#cardExpYr"),$("select#cardExpYr option:eq(0)").text("Year")),$(t).change(function(){var e=$("select#cardExpYr :selected").val();$(n).find('option:contains("'+e+'")').attr("selected","selected")})},cardCSC:function(){var e,t,a;e="input#cscCode",t=RegExp(/^\d{3,4}$/),a='table.DonationFormTable input[id*="txtCSC"]',$(e).blur(function(){var n=$(e).val();$(this).val().match(t)?($(this).removeClass("invalid").addClass("valid"),$(a).val(n),$(".paymentInfo h3").addClass("complete")):$(this).addClass("invalid")})},hiddenDataPersistence:function(){if($("div[id$=ValidationSummary1]").children().length>0){var e=$('.billingInfo [id*="txtFirstName"]').val();$(".donorFirstName #billingFirstName").val(e);var t=$('.billingInfo [id*="txtLastName"]').val();$(".donorLastName #billingLastName").val(t);var a=$('textarea[id$="AddressLine"]').val();$(".personalInfoList #billingAddress").val(a);var n=$('input[id$="CityUS"]').val();$(".wrapCity #billingCity").val(n);var i=$('input[id$="ZipUS"]').val();$(".wrapZip #zip").val(i);var o=$('.billingInfo [id*="txtPhone"]').val();$(".personalInfoList #billingPhone").val(o);var s=$('.billingInfo [id*="txtEmailAddress"]').val();$(".personalInfoList #email").val(s)}},autoFillExtraction:function(){var e=$("span[id$=DesignationValue]").text();$("#fundDesignList").append($("<option>",{value:e}).text(e)),$("input#cscCode").blur(function(){var e=$(".donorFirstName #billingFirstName").val();$('.billingInfo [id*="txtFirstName"]').val(e);var t=$(".donorLastName #billingLastName").val();$('.billingInfo [id*="txtLastName"]').val(t);var a=$(".personalInfoList #billingAddress").val();$('.billingInfo [id*="AddressLine"]').val(a);var n=$(".wrapCity #billingCity").val();$('.billingInfo [id*="City"]').val(n);var i=$(".wrapZip #zip").val();$('.DonationFormTable [id*="Zip"]').val(i);var o=$(".personalInfoList #billingPhone").val();$('.billingInfo [id*="txtPhone"]').val(o);var s=$(".personalInfoList #email").val();$('.billingInfo [id*="txtEmailAddress"]').val(s)})},submitButton:function(){$('.DonationButtonCell input[type="submit"].DonationSubmitButton').prependTo(".submitButton")}},stepOneToggleAnimations:function(){$(".donateAmount h3").addClass("complete"),$(".donorInfo .personalInfoList").removeClass("hide").slideDown(),$(".donorInfo").find("h3").removeClass(),$("#billingFirstName").focus()},stepToggles:function(){$('#wrapSingleGivingForm .givingAmountOptions .rdoAmount input[type="radio"]').click(function(){$(this).is(":checked")&&0===$("ul.giftType").length&&BBI.Methods.customSingleDonationForm.stepOneToggleAnimations()}),$('#wrapSingleGivingForm .givingAmountOptions .otherAmount input[type="text"]').blur(function(){""!==$(this).val()&&0===$("ul.giftType").length&&BBI.Methods.customSingleDonationForm.stepOneToggleAnimations()}),$('#wrapSingleGivingForm .giftType li input[type="checkbox"]').click(function(){$(this).is(":checked")&&BBI.Methods.customSingleDonationForm.stepOneToggleAnimations()}),$('input#email[type="email"]').keyup(function(){var e=RegExp(/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/);$(this).val().match(e)&&($(".paymentInfo").removeClass("hide").slideDown(),$(".donorInfo").find("h3").addClass("complete"),$(".paymentInfo").find("h3").removeClass())}),$("body").hasClass("Explorer")&&$(".personalInfoList input#email").keyup(function(){var e=RegExp(/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/);$(this).val().match(e)&&($(".paymentInfo").removeClass("hide").slideDown(),$(".donorInfo").find("h3").addClass("complete"),$(".paymentInfo").find("h3").removeClass())})},hiddenFormValidation:function(){$('#wrapSingleGivingForm + [id*="UpdatePanel"] .DonationFormTable [id*="ValidationSummary1"].DonationValidationSummary').insertBefore(".donateAmount");var e=$('[id*="lblThanks"].DonationMessage').insertBefore(".donateAmount");$(e).length&&$("fieldset.step").hide()}},resetBackgrounds:function(){$(".wrapBreadcrumbs p img").show(),$("#internalPage .inner-wrap .siteWrapper .fullWidthBackgroundImage").removeAttr("style")}}};BBI.Methods.pageInit();var $window=$(window),lastWindowWidth=$window.width();$window.resize(function(){var e=$window.width();lastWindowWidth!==e&&(BBI.Methods.resetBackgrounds(),lastWindowWidth=e)}),jQuery.expr[":"].Contains=function(e,t,a){return jQuery(e).text().toUpperCase().indexOf(a[3].toUpperCase())>=0},window.log=function(){if(log.history=log.history||[],log.history.push(arguments),this.console){arguments.callee=arguments.callee.caller;var e=[].slice.call(arguments);"object"==typeof console.log?log.apply.call(console.log,console,e):console.log.apply(console,e)}},function(e){function t(){}for(var a,n="assert,count,debug,dir,dirxml,error,exception,group,groupCollapsed,groupEnd,info,log,timeStamp,profile,profileEnd,time,timeEnd,trace,warn".split(",");a=n.pop();)e[a]=e[a]||t}(function(){try{return console.log(),window.console}catch(e){return window.console={}}}()),$("#fundSelect").on("change",function(e){BBI.Methods.addFund($(this))}),$("#help-link").on("click",function(e){$("#help-content").slideToggle(),$(this).find(".fa").toggleClass("rotate")});